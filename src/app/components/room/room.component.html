<!-- Room panel -->
<div class="container p-room-container">
  <nav class="navbar navbar-default">
    <div class="container">
      <div class="navbar-header">
        <div class="p-title-container">
          <span *ngIf="!isEditingName" class="p-nav-title" [title]="room?.name">{{room?.name}}</span>
          <div *ngIf="user?.isOwner" class="p-nav-title-editing-container">
            <input *ngIf="isEditingName" class="p-title-input" type="text" (blur)="onEditedName($event)" (keyup.enter)="onEditedName($event)"
              [value]="room?.name">
              <button class="btn btn-default p-edit-button" (click)="onEditName()"><i class="fa fa-pencil" aria-hidden="true"></i></button>
          </div>
        </div>

        <!-- Sign out button -->
        <button class="btn btn-default p-nav-btn" title="Sign out!" (click)="onSignout()">
                    <i class="fa fa-sign-out" aria-hidden="true"></i></button>

        <!-- Player-observer switch -->
        <button class="btn btn-default p-nav-btn" (click)="onUpdatePlayer()">
          <i *ngIf="user?.isPlayer" title="Switch to observing" class="fa fa-user-o" aria-hidden="true"></i>
          <i *ngIf="!user?.isPlayer" title="Switch to playing" class="fa fa-user" aria-hidden="true"></i>          
        </button>

        <!-- Lock label -->
        <span *ngIf="!user?.isOwner" class="p-nav-control">
                        <span *ngIf="lockRoom" title="Room is unlocked"><i class="fa fa-lock p-room-locked" aria-hidden="true"></i></span>
        <span *ngIf="!lockRoom" title="Room is locked"><i class="fa fa-unlock-alt p-room-unlocked" aria-hidden="true"></i></span>
        </span>

        <!-- Freeze label -->
        <span *ngIf="!user?.isOwner" class="p-nav-control">
                    <span *ngIf="freezeRoom" title="Room is frozen"><i class="fa fa-snowflake-o p-room-freeze" aria-hidden="true"></i></span>
        <span *ngIf="!freezeRoom" title="Room is unfrozen"><i class="fa fa-snowflake-o" aria-hidden="true"></i></span>
        </span>

        <!-- Lock button -->
        <button class="btn btn-default p-nav-btn" *ngIf="user?.isOwner" (click)="onLockRoom()">
                        <span *ngIf="lockRoom" title="Unlock room"><i class="fa fa-lock p-room-locked" aria-hidden="true"></i></span>
                        <span *ngIf="!lockRoom" title="Lock room"><i class="fa fa-unlock-alt p-room-unlocked" aria-hidden="true"></i></span></button>

        <!-- Freeze button -->
        <button class="btn btn-default p-nav-btn" *ngIf="user?.isOwner" (click)="onFreezeRoom()">
                        <span *ngIf="freezeRoom" title="Unfreeze room"><i class="fa fa-snowflake-o p-room-freeze" aria-hidden="true"></i></span>
                        <span *ngIf="!freezeRoom" title="Freeze room"><i class="fa fa-snowflake-o" aria-hidden="true"></i></span></button>

        <!-- Reveal button -->
        <button class="btn btn-default p-nav-btn" title="Reveal points" *ngIf="user?.isOwner" (click)="onRevealRoom()">
                    <i class="fa fa-magic p-room-reveal"  [class.p-revealed]="room?.reveal" aria-hidden="true"></i></button>

        <!-- Reset button -->
        <button class="btn btn-default p-nav-btn" title="Set/Reset session" *ngIf="user?.isOwner" (click)="onResetRoom()">
                    <i class="fa fa-repeat p-room-reset"  aria-hidden="true"></i></button>


      </div>
    </div>
  </nav>
</div>
<div class="container p-gamearea">
  <div class="col-xs-6">
    <!--<app-emote></app-emote>-->
  </div>
  <div class="col-xs-6">
    <div class="p-timer">{{time}}</div>
  </div>
  <div class="col-xs-6">
    <ul class="p-user-list">
      <li *ngFor="let user of users" class="p-user">
        <div class="p-room-username-container">
          <button *ngIf="user?.isOwner" class="btn btn-default p-btn-remove-user" (click)="onKickUser(user)">
            <i class="fa fa-times p-remove-icon" aria-hidden="true"></i>
          </button>

          <div class="p-user-points" [class.p-has-points]="user?.points && user?.isPlayer" [class.p-has-new-points]="user?.hasNewPoints">
            <span *ngIf="room?.reveal">{{user?.points}}</span>
          </div>

          <i *ngIf="user?.isPlayer" title="Player is playing" class="fa fa-user" aria-hidden="true"></i>
          <i *ngIf="!user?.isPlayer" title="Player is observing" class="fa fa-user-o" aria-hidden="true"></i>

          <div class="p-room-username" [innerHtml]="user?.name"></div>
        </div>
      </li>
      <li *ngIf="!users.length" class="p-user">Waiting on players...</li>
      <li class="p-owner">
        <hr/>

        <div *ngIf="owner?.isPlayer" class="p-user-points" [class.p-has-points]="owner?.points && owner?.isPlayer" [class.p-has-new-points]="owner?.hasNewPoints">
          <span *ngIf="room?.reveal">{{owner?.points}}</span>
        </div>

        <i *ngIf="owner?.isPlayer" title="Room owner is player" class="fa fa-user" aria-hidden="true"></i>
        <i *ngIf="!owner?.isPlayer" title="Room owner is observing" class="fa fa-user-o" aria-hidden="true"></i>
        <div class="p-room-ownername" [innerHtml]="owner?.name"></div>
      </li>
    </ul>
  </div>
  <div class="col-xs-6">
    <ul class="p-point-list">
      <li *ngFor="let card of fibonacci" class="p-point-list-item wobble-vertical" [class.p-selected]="card?.selected" (click)="onSelectedFibonacci(card)">{{card.points}}</li>
    </ul>
  </div>
</div>